## 新增需求

### 需求：底部导航与页面分区
系统必须提供底部导航用于“主页”与“设置”分区：
- 主页展示当前工号、图表区与明细列表。
- 设置页提供 `emCode` 与 `Authorization` 的输入与保存。

#### 场景：从设置页返回主页
- **当** 用户在设置页保存配置并返回主页
- **那么** 主页显示当前工号

### 需求：图表视图切换
系统必须提供“年”与“月”的柱状图切换：
- 年视图显示按月平均工时柱状图，范围为起始/结束年月之间。
- 月视图显示按日平均工时柱状图，范围为选定月份。
- 切换后复用同一警戒线阈值规则。

#### 场景：切换到月视图
- **当** 用户切换到月视图
- **那么** 系统展示选定月份的按日柱状图

### 需求：拉取时间展示
系统必须在图表区域展示当前使用数据的拉取时间：
- 文案格式为 `当前使用数据拉取时间为yyyy-MM-dd hh:mm:ss`。
- 当无缓存时不显示该文案。

#### 场景：展示拉取时间
- **当** 本地存在近一年缓存数据
- **那么** 系统显示拉取时间文案

## 修改需求

### 需求：设置与本地存储
系统必须提供 `emCode` 与 `Authorization` 输入，并持久化保存：
- 输入位置在“设置”页签。
- 应用启动时自动读取本地存储并回填输入框。
- 用户修改后写入本地存储，后续查询使用最新值。
- 主页仅展示当前 `emCode`，不显示输入框。

#### 场景：重启后自动回填
- **当** 用户已保存配置并重新打开应用
- **那么** 系统自动填充上次保存的 `emCode` 与 `Authorization`

### 需求：月份选择与查询控制
系统必须提供“年”与“月”视图的年月选择能力：
- 年视图提供“起始年月”与“结束年月”两个选择器，结束年月不得早于起始年月。
- 月视图提供单月选择器，默认选中当前月。
- 年视图默认范围为“当前月往前 11 个月”至“当前月”。

#### 场景：结束年月早于起始年月
- **当** 用户选择的结束年月早于起始年月
- **那么** 系统禁止确认并提示用户调整

### 需求：统计指标与异常处理
系统必须基于“今天”之前的记录计算统计指标：
- 仅统计 `日期 < 今天(YYYY-MM-DD)` 且位于选定范围内的记录。
- `有效工作日 = 有效工作日` 列求和，`总有效工时 = 工时` 列求和。
- `平均工时 = 总有效工时 / 有效工作日`，四舍五入保留 2 位小数。
- 当 `有效工作日 == 0` 时，平均工时显示“异常”，不进行除法计算。

#### 场景：范围内无有效工作日
- **当** 选定范围内没有有效工作日
- **那么** 系统显示“平均工时：异常”

### 需求：概览仪表盘展示
系统必须在图表视图内展示以下核心指标：
- 平均工时
- 有效工作日
- 总有效工时
- 指标数值必须随当前视图选择范围变化。

#### 场景：切换年月范围
- **当** 用户调整年视图的起始/结束年月
- **那么** 系统更新对应范围的概览指标数值
